<!DOCTYPE html>
<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

    <style>
      .head {
        padding: 20px;
        background: #589442;
        color: #fff;
        text-shadow: 0 0 1px #4B7E37;
      }
      .control {
        text-align: center;
        padding: 20px;
        margin: 0 10%;
      }
      .control input,
      .control #URL {
        width: 70%;
        float: right;
      }
    </style>

    <script type="text/javascript">
      // Base url for making API calls
      var baseUrl = "http://api.tripadvisor.com/api/partner/2.0/";
      var initialPath = "location/187791/restaurants";

      // function to update the text in the url input
      var updateUrl = function() {
        var url = baseUrl + $('#PATH').val();       // get the value from the path input box
        url += (url.indexOf('?') > 0) ? '&' : '?';  // add a ? or a & depending on the path
        url += "key=" + $('#KEY').val();            // get the key from the input box and add it to the url
        $('#URL').html(url);                        // paste that value into the url element
        $('#URL_LINK').attr('href', url);           // paste that value into the href around the input box
      };

      $( document ).ready( function() {
        // Any time the input changes update the url
        $('#PATH,#KEY').bind("propertychange change click keyup input paste", updateUrl);
        $('#PATH').val(initialPath);

        // Update the url on page load
        updateUrl.call();
      });

    </script>
  </head>

  <body>
    <div class="head">
      <h1>Learning RESTful APIs</h1>
      <h2>Using jQuery and TripAdvisor's partner API</h2>
    </div>

    <div class="control">
      <div class="line"><h3>Path: <input id="PATH" type="text" name="path"></h3></div>
      <div class="line"><h3>Key: <input id="KEY" type="text" name="key"></h3></div>
      <div class="line "><h3>Url: <a id="URL_LINK" href="#" target="_blank"><div id="URL"></div></a></h3></div>
    </div>
    
  </body>
</html>
